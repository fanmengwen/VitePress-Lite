# VitePress-Lite Monorepo ä½¿ç”¨æŒ‡å—

## ğŸ“ é¡¹ç›®ç»“æ„

```
VitePress-Lite/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ api-server/     # åç«¯ API æœåŠ¡
â”‚   â””â”€â”€ docs-site/      # å‰ç«¯æ–‡æ¡£ç«™ç‚¹
â”œâ”€â”€ package.json        # æ ¹ç›®å½• - monorepo ç®¡ç†
â””â”€â”€ pnpm-workspace.yaml # pnpm å·¥ä½œåŒºé…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
pnpm dev
```

è¿™å°†åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯å¼€å‘æœåŠ¡å™¨ï¼š

- å‰ç«¯ï¼š`http://localhost:5173`
- åç«¯ï¼š`http://localhost:3001`

### å•ç‹¬å¯åŠ¨æŸä¸ªæœåŠ¡

```bash
# ä»…å¯åŠ¨å‰ç«¯
pnpm dev:docs

# ä»…å¯åŠ¨åç«¯
pnpm dev:api
```

## ğŸ”§ å¼€å‘å‘½ä»¤

### å¼€å‘ç¯å¢ƒ

| å‘½ä»¤            | åŠŸèƒ½         | è¯´æ˜                     |
| --------------- | ------------ | ------------------------ |
| `pnpm dev`      | å¯åŠ¨æ‰€æœ‰æœåŠ¡ | å¹¶è¡Œå¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨ |
| `pnpm dev:docs` | å¯åŠ¨å‰ç«¯     | ä»…å¯åŠ¨æ–‡æ¡£ç«™ç‚¹           |
| `pnpm dev:api`  | å¯åŠ¨åç«¯     | ä»…å¯åŠ¨ API æœåŠ¡å™¨        |

### æ„å»ºéƒ¨ç½²

| å‘½ä»¤                    | åŠŸèƒ½         | è¯´æ˜                       |
| ----------------------- | ------------ | -------------------------- |
| `pnpm build`            | æ„å»ºæ‰€æœ‰é¡¹ç›® | ç”Ÿæˆç”Ÿäº§ç¯å¢ƒä»£ç            |
| `pnpm build:docs`       | æ„å»ºå‰ç«¯     | ç”Ÿæˆé™æ€æ–‡ä»¶åˆ° `dist/`     |
| `pnpm build:api`        | æ„å»ºåç«¯     | ç¼–è¯‘ TypeScript åˆ° `dist/` |
| `pnpm preview`          | é¢„è§ˆå‰ç«¯     | æœ¬åœ°é¢„è§ˆæ„å»ºåçš„å‰ç«¯       |
| `pnpm start:production` | ç”Ÿäº§ç¯å¢ƒå¯åŠ¨ | æ„å»ºå¹¶å¯åŠ¨å®Œæ•´åº”ç”¨         |

### æµ‹è¯•å‘½ä»¤

| å‘½ä»¤                        | åŠŸèƒ½         | è¯´æ˜                   |
| --------------------------- | ------------ | ---------------------- |
| `pnpm test`                 | è¿è¡Œæ‰€æœ‰æµ‹è¯• | æ‰§è¡Œå‰åç«¯æµ‹è¯•å¥—ä»¶     |
| `pnpm test:api`             | åç«¯å•å…ƒæµ‹è¯• | è¿è¡Œ Jest æµ‹è¯•         |
| `pnpm test:api-integration` | åç«¯é›†æˆæµ‹è¯• | è¿è¡Œ API é›†æˆæµ‹è¯•      |
| `pnpm test:watch`           | ç›‘è§†æµ‹è¯•     | æ–‡ä»¶å˜æ›´æ—¶è‡ªåŠ¨è¿è¡Œæµ‹è¯• |

## ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†

| å‘½ä»¤               | åŠŸèƒ½           | è¯´æ˜                         |
| ------------------ | -------------- | ---------------------------- |
| `pnpm db:migrate`  | æ•°æ®åº“è¿ç§»     | åº”ç”¨æ–°çš„æ•°æ®åº“æ¶æ„           |
| `pnpm db:generate` | ç”Ÿæˆå®¢æˆ·ç«¯     | æ›´æ–° Prisma å®¢æˆ·ç«¯           |
| `pnpm db:studio`   | æ•°æ®åº“ç®¡ç†ç•Œé¢ | æ‰“å¼€ Prisma Studio           |
| `pnpm db:seed`     | å¡«å……æµ‹è¯•æ•°æ®   | æ·»åŠ åˆå§‹æ•°æ®                 |
| `pnpm db:sync`     | åŒæ­¥æ–‡æ¡£æ•°æ®   | å°† Markdown æ–‡ä»¶åŒæ­¥åˆ°æ•°æ®åº“ |
| `pnpm db:reset`    | é‡ç½®æ•°æ®åº“     | é‡æ–°è¿ç§»å¹¶å¡«å……æ•°æ®           |

## ğŸ› ï¸ ç»´æŠ¤å‘½ä»¤

| å‘½ä»¤                 | åŠŸèƒ½         | è¯´æ˜                     |
| -------------------- | ------------ | ------------------------ |
| `pnpm clean`         | æ¸…ç†æ„å»ºæ–‡ä»¶ | åˆ é™¤ `dist/` å’Œç¼“å­˜      |
| `pnpm format`        | ä»£ç æ ¼å¼åŒ–   | ä½¿ç”¨ Prettier æ ¼å¼åŒ–ä»£ç  |
| `pnpm lint`          | ä»£ç æ£€æŸ¥     | è¿è¡Œ ESLint æ£€æŸ¥         |
| `pnpm type-check`    | ç±»å‹æ£€æŸ¥     | TypeScript ç±»å‹éªŒè¯      |
| `pnpm deps:update`   | æ›´æ–°ä¾èµ–     | æ›´æ–°æ‰€æœ‰åŒ…çš„ä¾èµ–         |
| `pnpm deps:outdated` | æ£€æŸ¥è¿‡æœŸä¾èµ– | æŸ¥çœ‹å¯æ›´æ–°çš„ä¾èµ–         |

## ğŸ“ å¼€å‘å·¥ä½œæµ

### æ—¥å¸¸å¼€å‘

1. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**

   ```bash
   pnpm dev
   ```

2. **æ•°æ®åº“åˆå§‹åŒ–**ï¼ˆé¦–æ¬¡å¼€å‘ï¼‰

   ```bash
   pnpm db:migrate
   pnpm db:seed
   ```

3. **ä»£ç å¼€å‘**
   - å‰ç«¯ä»£ç ï¼š`packages/docs-site/src/`
   - åç«¯ä»£ç ï¼š`packages/api-server/src/`

4. **æµ‹è¯•éªŒè¯**
   ```bash
   pnpm test
   ```

### åŠŸèƒ½å‘å¸ƒ

1. **ä»£ç æ£€æŸ¥**

   ```bash
   pnpm lint
   pnpm type-check
   ```

2. **æ„å»ºéªŒè¯**

   ```bash
   pnpm build
   ```

3. **ç”Ÿäº§ç¯å¢ƒæµ‹è¯•**
   ```bash
   pnpm start:production
   ```

## ğŸ—ï¸ Monorepo æ¶æ„ä¼˜åŠ¿

### 1. ç»Ÿä¸€ä¾èµ–ç®¡ç†

- **ä¾èµ–æå‡**ï¼šå…¬å…±ä¾èµ–å®‰è£…åœ¨æ ¹ç›®å½•ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´
- **ç‰ˆæœ¬ä¸€è‡´æ€§**ï¼šç¡®ä¿ç›¸åŒä¾èµ–åœ¨ä¸åŒåŒ…ä¸­ç‰ˆæœ¬ä¸€è‡´
- **ç¬¦å·é“¾æ¥**ï¼šé€šè¿‡è½¯é“¾æ¥å…±äº«ä¾èµ–ï¼Œæé«˜å®‰è£…é€Ÿåº¦

### 2. é«˜æ•ˆçš„è„šæœ¬ç¼–æ’

- **å¹¶è¡Œæ‰§è¡Œ**ï¼š`--parallel` æ ‡å¿—åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡
- **é€‰æ‹©æ€§æ‰§è¡Œ**ï¼š`--filter` æ ‡å¿—é’ˆå¯¹ç‰¹å®šåŒ…æ‰§è¡Œå‘½ä»¤
- **ä¾èµ–æ„ŸçŸ¥**ï¼šè‡ªåŠ¨å¤„ç†åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»

### 3. å¼€å‘ä½“éªŒä¼˜åŒ–

- **ä¸€é”®å¯åŠ¨**ï¼šå•ä¸ªå‘½ä»¤å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
- **ç»Ÿä¸€æ¥å£**ï¼šæ‰€æœ‰æ“ä½œéƒ½åœ¨æ ¹ç›®å½•è¿›è¡Œ
- **æ™ºèƒ½è·¯ç”±**ï¼šå‘½ä»¤è‡ªåŠ¨è·¯ç”±åˆ°æ­£ç¡®çš„å­åŒ…

## ğŸ”§ è‡ªå®šä¹‰æ‰©å±•

### æ·»åŠ æ–°çš„å­åŒ…

1. åœ¨ `packages/` ä¸‹åˆ›å»ºæ–°ç›®å½•
2. æ·»åŠ  `package.json` é…ç½®
3. ç¡®ä¿åŒ…å«æ ‡å‡†è„šæœ¬ï¼š`dev`ã€`build`ã€`test`
4. æ ¹ç›®å½•è„šæœ¬ä¼šè‡ªåŠ¨å‘ç°å¹¶åŒ…å«æ–°åŒ…

### æ·»åŠ æ–°çš„è„šæœ¬

åœ¨æ ¹ç›®å½• `package.json` ä¸­æ·»åŠ ï¼š

```json
{
  "scripts": {
    "my-command": "pnpm --filter package-name my-script"
  }
}
```

## ğŸš¨ å¸¸è§é—®é¢˜

### ä¾èµ–å®‰è£…é—®é¢˜

```bash
# æ¸…ç†å¹¶é‡æ–°å®‰è£…
pnpm clean
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

### æ•°æ®åº“è¿æ¥é—®é¢˜

```bash
# é‡ç½®æ•°æ®åº“
pnpm db:reset
```

### ç«¯å£é…ç½®

- å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š5173
- åç«¯ API æœåŠ¡å™¨ï¼š3001
- å‰ç«¯é€šè¿‡ä»£ç† `/api` è®¿é—®åç«¯æœåŠ¡
- å¯åœ¨å„è‡ªçš„ç¯å¢ƒå˜é‡ä¸­ä¿®æ”¹

## ğŸ“š æŠ€æœ¯æ ˆ

- **åŒ…ç®¡ç†å™¨**ï¼špnpm + workspace
- **å‰ç«¯**ï¼šVue 3 + TypeScript + Vite
- **åç«¯**ï¼šNode.js + Express + TypeScript
- **æ•°æ®åº“**ï¼šSQLite + Prisma ORM
- **æµ‹è¯•**ï¼šJest + Supertest
